@import '../../../styles/variables';
@import '../../../styles/extends';

.pipeline-icon-toolbar__button {
  background: none;
  border: none;
  box-shadow: none;
  color: inherit;
  cursor: pointer;
  font-size: 1.1em;
  height: $sidebar-width-closed;
  padding: 0;
  position: relative;
  text-align: center;
  user-select: none;
  vertical-align: middle;
  width: $sidebar-width-closed;

  @media (max-height: 550px) {
    height: $sidebar-width-closed - 14;
  }

  &:focus {
    outline: none;

    [data-whatinput='keyboard'] & {
      outline: 3px solid $color-link;
    }
  }

  &:hover svg {
    opacity: 1;
  }

  &:disabled {
    cursor: not-allowed;

    svg {
      opacity: 0.2;
    }
  }

  svg {
    width: 2.175em;
    height: 2.175em;
  }

  &--active svg {
    opacity: 1;
  }
}

.pipeline-toolbar__label {
  @extend %tooltip;

  display: inline-block;
  font-size: 1.4em;
  left: 50%;
  margin-left: 1.6em;
  margin-top: -1.2em;
  opacity: 0;
  padding: 0.5em 0.7em;
  pointer-events: none;
  position: absolute;
  top: 50%;
  transition: opacity ease 0.1s;
  white-space: nowrap;

  @media (max-width: $sidebar-width-breakpoint) {
    .pipeline-sidebar--visible & {
      left: auto;
      margin-left: auto;
      margin-right: 1.6em;
      right: 50%;
    }
  }

  .pipeline-icon-toolbar__button:hover &,
  [data-whatinput='keyboard'] .pipeline-icon-toolbar__button:focus & {
    opacity: 1;
    pointer-events: all;
    transition-delay: 1s;
  }

  &::after {
    $triangle-size: 7px;

    border-color: transparent var(--color-bg-alt) transparent transparent;
    border-style: solid;
    border-width: $triangle-size $triangle-size $triangle-size 0;
    content: '';
    height: 0;
    left: -$triangle-size + 0.5;
    position: absolute;
    top: calc(50% - #{$triangle-size});
    width: 0;

    @media (max-width: $sidebar-width-breakpoint) {
      .pipeline-sidebar--visible & {
        border-color: transparent transparent transparent var(--color-bg-alt);
        border-width: $triangle-size 0 $triangle-size $triangle-size;
        left: auto;
        right: -$triangle-size + 0.5;
      }
    }
  }
}

.pipeline-icon {
  fill: var(--color-default-alt);
  opacity: 0.7;
  transition: opacity 300ms ease;
}
