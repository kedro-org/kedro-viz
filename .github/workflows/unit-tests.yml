name: Run unit-tests on Kedro-Viz
# Runs unit tests on Kedro-Viz only on Windows and skips Python 3.9.

on:
  workflow_call:
    inputs:
      os:
        type: string
      python-version:
        type: string

jobs:
  unit_tests:
    runs-on: ${{ inputs.os }}

    # Run only on Windows (skip Ubuntu) & skip Python 3.9 on Windows
    if: >
      (
        inputs.os == 'windows-latest' &&
        inputs.python-version != '3.9'
      )

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Tests
        uses: "./.github/actions/setup_tests"
        with:
          os: ${{ inputs.os }}
          python-version: ${{ inputs.python-version }}

      - name: Run Python tests
        run: make pytest  
