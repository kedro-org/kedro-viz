/*! For license information please see ddbb56d1f11d8ec8cfa3.worker.js.LICENSE.txt */
var t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function n(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}t.d(e,{graphNew:()=>dt});const i=.5*Math.PI,s=(t,e)=>Math.round(t/e)*e,a=(t,e,r)=>"vertical"===r?Math.atan2(t.y-e.y,t.x-e.x):Math.atan2(t.x-e.x,t.y-e.y),c=t=>t.x-.5*t.width,p=t=>t.x+.5*t.width,u=t=>t.y-.5*t.height,f=t=>t.y+.5*t.height,h=(t,e)=>{const r={},o="vertical"===e?"y":"x",n="vertical"===e?"x":"y";for(const e of t){const t=e[o];r[t]=r[t]||[],r[t].push(e)}const i=Object.keys(r).map((t=>parseFloat(t)));i.sort(((t,e)=>t-e));const s=i.map((t=>r[t]));for(let t=0;t<s.length;t+=1){s[t].sort(((t,e)=>l(t[n],e[n],t.id,e.id)));for(const e of s[t])e.row=t}return s},l=function(t,e){const r="string"==typeof t?t.localeCompare(e):t-e;for(var o=arguments.length,n=new Array(o>2?o-2:0),i=2;i<o;i++)n[i-2]=arguments[i];return 0!==r||0===n.length?r:l(...n)},d=(t,e,r,o,n,i)=>{const s=n-r,a=i-o,c=(f=1,(p=((t-r)*s+(e-o)*a)/(s*s+a*a||1))<(u=0)?u:p>f?f:p);var p,u,f;return{x:r+s*c,y:o+a*c,ax:r,ay:o,bx:n,by:i}};function y(){return new m}var m=function(){function t(){this.index={},this.array=[]}return t.prototype.size=function(){return this.array.length},t.prototype.empty=function(){return 0===this.array.length},t.prototype.itemAt=function(t){return this.array[t]},t.prototype.contains=function(t){return void 0!==this.index[t.id()]},t.prototype.find=function(t){var e=this.index[t.id()];return void 0===e?void 0:this.array[e]},t.prototype.setDefault=function(t,e){var r=this.index[t.id()];if(void 0===r){var o=new v(t,e());return this.index[t.id()]=this.array.length,this.array.push(o),o}return this.array[r]},t.prototype.insert=function(t,e){var r=new v(t,e),o=this.index[t.id()];return void 0===o?(this.index[t.id()]=this.array.length,this.array.push(r)):this.array[o]=r,r},t.prototype.erase=function(t){var e=this.index[t.id()];if(void 0!==e){this.index[t.id()]=void 0;var r=this.array[e],o=this.array.pop();return r!==o&&(this.array[e]=o,this.index[o.first.id()]=e),r}},t.prototype.copy=function(){for(var e=new t,r=0;r<this.array.length;r++){var o=this.array[r].copy();e.array[r]=o,e.index[o.first.id()]=r}return e},t}(),v=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.copy=function(){return new t(this.first,this.second)},t}(),g=function(){function t(t){void 0===t&&(t=""),this._value=0,this._context=null,this._id=_++,this._name=t}return t.prototype.id=function(){return this._id},t.prototype.name=function(){return this._name},t.prototype.setName=function(t){this._name=t},t.prototype.context=function(){return this._context},t.prototype.setContext=function(t){this._context=t},t.prototype.value=function(){return this._value},t.prototype.setValue=function(t){this._value=t},t.prototype.plus=function(t){return new b(this,t)},t.prototype.minus=function(t){return new b(this,"number"==typeof t?-t:[-1,t])},t.prototype.multiply=function(t){return new b([t,this])},t.prototype.divide=function(t){return new b([1/t,this])},t.prototype.toJSON=function(){return{name:this._name,value:this._value}},t.prototype.toString=function(){return this._context+"["+this._name+":"+this._value+"]"},t}(),_=0,b=function(){function t(){var t=w(arguments);this._terms=t.terms,this._constant=t.constant}return t.prototype.terms=function(){return this._terms},t.prototype.constant=function(){return this._constant},t.prototype.value=function(){for(var t=this._constant,e=0,r=this._terms.size();e<r;e++){var o=this._terms.itemAt(e);t+=o.first.value()*o.second}return t},t.prototype.plus=function(e){return new t(this,e)},t.prototype.minus=function(e){return new t(this,"number"==typeof e?-e:[-1,e])},t.prototype.multiply=function(e){return new t([e,this])},t.prototype.divide=function(e){return new t([1/e,this])},t.prototype.isConstant=function(){return 0==this._terms.size()},t.prototype.toString=function(){var t=this._terms.array.map((function(t){return t.second+"*"+t.first.toString()})).join(" + ");return this.isConstant()||0===this._constant||(t+=" + "),t+=this._constant},t}();function w(t){for(var e=0,r=function(){return 0},o=y(),n=0,i=t.length;n<i;++n){var s=t[n];if("number"==typeof s)e+=s;else if(s instanceof g)o.setDefault(s,r).second+=1;else if(s instanceof b){e+=s.constant();for(var a=0,c=(h=s.terms()).size();a<c;a++){var p=h.itemAt(a);o.setDefault(p.first,r).second+=p.second}}else{if(!(s instanceof Array))throw new Error("invalid Expression argument: "+s);if(2!==s.length)throw new Error("array must have length 2");var u=s[0],f=s[1];if("number"!=typeof u)throw new Error("array item 0 must be a number");if(f instanceof g)o.setDefault(f,r).second+=u;else{if(!(f instanceof b))throw new Error("array item 1 must be a variable or expression");e+=f.constant()*u;var h;for(a=0,c=(h=f.terms()).size();a<c;a++){p=h.itemAt(a);o.setDefault(p.first,r).second+=p.second*u}}}}return{terms:o,constant:e}}var x,M=function(){function t(){}return t.create=function(t,e,r,o){void 0===o&&(o=1);var n=0;return n+=1e6*Math.max(0,Math.min(1e3,t*o)),n+=1e3*Math.max(0,Math.min(1e3,e*o)),n+=Math.max(0,Math.min(1e3,r*o))},t.clip=function(e){return Math.max(0,Math.min(t.required,e))},t.required=t.create(1e3,1e3,1e3),t.strong=t.create(1,0,0),t.medium=t.create(0,1,0),t.weak=t.create(0,0,1),t}();!function(t){t[t.Le=0]="Le",t[t.Ge=1]="Ge",t[t.Eq=2]="Eq"}(x||(x={}));var S,E=function(){function t(t,e,r,o){void 0===o&&(o=M.required),this._id=O++,this._operator=e,this._strength=M.clip(o),this._expression=void 0===r&&t instanceof b?t:t.minus(r)}return t.prototype.id=function(){return this._id},t.prototype.expression=function(){return this._expression},t.prototype.op=function(){return this._operator},t.prototype.strength=function(){return this._strength},t.prototype.toString=function(){return this._expression.toString()+" "+["<=",">=","="][this._operator]+" 0 ("+this._strength.toString()+")"},t}(),O=0,j=function(){function t(){this._cnMap=y(),this._rowMap=y(),this._varMap=y(),this._editMap=y(),this._infeasibleRows=[],this._objective=new P,this._artificial=null,this._idTick=0}return t.prototype.createConstraint=function(t,e,r,o){void 0===o&&(o=M.required);var n=new E(t,e,r,o);return this.addConstraint(n),n},t.prototype.addConstraint=function(t){if(void 0!==this._cnMap.find(t))throw new Error("duplicate constraint");var e=this._createRow(t),r=e.row,o=e.tag,n=this._chooseSubject(r,o);if(n.type()===S.Invalid&&r.allDummies()){if(!k(r.constant()))throw new Error("unsatisfiable constraint");n=o.marker}if(n.type()===S.Invalid){if(!this._addWithArtificialVariable(r))throw new Error("unsatisfiable constraint")}else r.solveFor(n),this._substitute(n,r),this._rowMap.insert(n,r);this._cnMap.insert(t,o),this._optimize(this._objective)},t.prototype.removeConstraint=function(t){var e=this._cnMap.erase(t);if(void 0===e)throw new Error("unknown constraint");this._removeConstraintEffects(t,e.second);var r=e.second.marker,o=this._rowMap.erase(r);if(void 0===o){var n=this._getMarkerLeavingSymbol(r);if(n.type()===S.Invalid)throw new Error("failed to find leaving row");(o=this._rowMap.erase(n)).second.solveForEx(n,r),this._substitute(r,o.second)}this._optimize(this._objective)},t.prototype.hasConstraint=function(t){return this._cnMap.contains(t)},t.prototype.addEditVariable=function(t,e){if(void 0!==this._editMap.find(t))throw new Error("duplicate edit variable");if((e=M.clip(e))===M.required)throw new Error("bad required strength");var r=new b(t),o=new E(r,x.Eq,void 0,e);this.addConstraint(o);var n={tag:this._cnMap.find(o).second,constraint:o,constant:0};this._editMap.insert(t,n)},t.prototype.removeEditVariable=function(t){var e=this._editMap.erase(t);if(void 0===e)throw new Error("unknown edit variable");this.removeConstraint(e.second.constraint)},t.prototype.hasEditVariable=function(t){return this._editMap.contains(t)},t.prototype.suggestValue=function(t,e){var r=this._editMap.find(t);if(void 0===r)throw new Error("unknown edit variable");var o=this._rowMap,n=r.second,i=e-n.constant;n.constant=e;var s=n.tag.marker,a=o.find(s);if(void 0!==a)return a.second.add(-i)<0&&this._infeasibleRows.push(s),void this._dualOptimize();var c=n.tag.other;if(void 0!==(a=o.find(c)))return a.second.add(i)<0&&this._infeasibleRows.push(c),void this._dualOptimize();for(var p=0,u=o.size();p<u;++p){var f=o.itemAt(p),h=f.second,l=h.coefficientFor(s);0!==l&&h.add(i*l)<0&&f.first.type()!==S.External&&this._infeasibleRows.push(f.first)}this._dualOptimize()},t.prototype.updateVariables=function(){for(var t=this._varMap,e=this._rowMap,r=0,o=t.size();r<o;++r){var n=t.itemAt(r),i=e.find(n.second);void 0!==i?n.first.setValue(i.second.constant()):n.first.setValue(0)}},t.prototype._getVarSymbol=function(t){var e=this;return this._varMap.setDefault(t,(function(){return e._makeSymbol(S.External)})).second},t.prototype._createRow=function(t){for(var e=t.expression(),r=new P(e.constant()),o=e.terms(),n=0,i=o.size();n<i;++n){var s=o.itemAt(n);if(!k(s.second)){var a=this._getVarSymbol(s.first),c=this._rowMap.find(a);void 0!==c?r.insertRow(c.second,s.second):r.insertSymbol(a,s.second)}}var p=this._objective,u=t.strength(),f={marker:z,other:z};switch(t.op()){case x.Le:case x.Ge:var h=t.op()===x.Le?1:-1,l=this._makeSymbol(S.Slack);if(f.marker=l,r.insertSymbol(l,h),u<M.required){var d=this._makeSymbol(S.Error);f.other=d,r.insertSymbol(d,-h),p.insertSymbol(d,u)}break;case x.Eq:if(u<M.required){var y=this._makeSymbol(S.Error),m=this._makeSymbol(S.Error);f.marker=y,f.other=m,r.insertSymbol(y,-1),r.insertSymbol(m,1),p.insertSymbol(y,u),p.insertSymbol(m,u)}else{var v=this._makeSymbol(S.Dummy);f.marker=v,r.insertSymbol(v)}}return r.constant()<0&&r.reverseSign(),{row:r,tag:f}},t.prototype._chooseSubject=function(t,e){for(var r=t.cells(),o=0,n=r.size();o<n;++o){var i=r.itemAt(o);if(i.first.type()===S.External)return i.first}var s=e.marker.type();return(s===S.Slack||s===S.Error)&&t.coefficientFor(e.marker)<0?e.marker:((s=e.other.type())===S.Slack||s===S.Error)&&t.coefficientFor(e.other)<0?e.other:z},t.prototype._addWithArtificialVariable=function(t){var e=this._makeSymbol(S.Slack);this._rowMap.insert(e,t.copy()),this._artificial=t.copy(),this._optimize(this._artificial);var r=k(this._artificial.constant());this._artificial=null;var o=this._rowMap.erase(e);if(void 0!==o){var n=o.second;if(n.isConstant())return r;var i=this._anyPivotableSymbol(n);if(i.type()===S.Invalid)return!1;n.solveForEx(e,i),this._substitute(i,n),this._rowMap.insert(i,n)}for(var s=this._rowMap,a=0,c=s.size();a<c;++a)s.itemAt(a).second.removeSymbol(e);return this._objective.removeSymbol(e),r},t.prototype._substitute=function(t,e){for(var r=this._rowMap,o=0,n=r.size();o<n;++o){var i=r.itemAt(o);i.second.substitute(t,e),i.second.constant()<0&&i.first.type()!==S.External&&this._infeasibleRows.push(i.first)}this._objective.substitute(t,e),this._artificial&&this._artificial.substitute(t,e)},t.prototype._optimize=function(t){for(;;){var e=this._getEnteringSymbol(t);if(e.type()===S.Invalid)return;var r=this._getLeavingSymbol(e);if(r.type()===S.Invalid)throw new Error("the objective is unbounded");var o=this._rowMap.erase(r).second;o.solveForEx(r,e),this._substitute(e,o),this._rowMap.insert(e,o)}},t.prototype._dualOptimize=function(){for(var t=this._rowMap,e=this._infeasibleRows;0!==e.length;){var r=e.pop(),o=t.find(r);if(void 0!==o&&o.second.constant()<0){var n=this._getDualEnteringSymbol(o.second);if(n.type()===S.Invalid)throw new Error("dual optimize failed");var i=o.second;t.erase(r),i.solveForEx(r,n),this._substitute(n,i),t.insert(n,i)}}},t.prototype._getEnteringSymbol=function(t){for(var e=t.cells(),r=0,o=e.size();r<o;++r){var n=e.itemAt(r),i=n.first;if(n.second<0&&i.type()!==S.Dummy)return i}return z},t.prototype._getDualEnteringSymbol=function(t){for(var e=Number.MAX_VALUE,r=z,o=t.cells(),n=0,i=o.size();n<i;++n){var s=o.itemAt(n),a=s.first,c=s.second;if(c>0&&a.type()!==S.Dummy){var p=this._objective.coefficientFor(a)/c;p<e&&(e=p,r=a)}}return r},t.prototype._getLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=z,o=this._rowMap,n=0,i=o.size();n<i;++n){var s=o.itemAt(n),a=s.first;if(a.type()!==S.External){var c=s.second,p=c.coefficientFor(t);if(p<0){var u=-c.constant()/p;u<e&&(e=u,r=a)}}}return r},t.prototype._getMarkerLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=e,o=e,n=z,i=n,s=n,a=n,c=this._rowMap,p=0,u=c.size();p<u;++p){var f=c.itemAt(p),h=f.second,l=h.coefficientFor(t);if(0!==l){var d=f.first;if(d.type()===S.External)a=d;else if(l<0){(y=-h.constant()/l)<r&&(r=y,i=d)}else{var y;(y=h.constant()/l)<o&&(o=y,s=d)}}}return i!==n?i:s!==n?s:a},t.prototype._removeConstraintEffects=function(t,e){e.marker.type()===S.Error&&this._removeMarkerEffects(e.marker,t.strength()),e.other.type()===S.Error&&this._removeMarkerEffects(e.other,t.strength())},t.prototype._removeMarkerEffects=function(t,e){var r=this._rowMap.find(t);void 0!==r?this._objective.insertRow(r.second,-e):this._objective.insertSymbol(t,-e)},t.prototype._anyPivotableSymbol=function(t){for(var e=t.cells(),r=0,o=e.size();r<o;++r){var n=e.itemAt(r),i=n.first.type();if(i===S.Slack||i===S.Error)return n.first}return z},t.prototype._makeSymbol=function(t){return new N(t,this._idTick++)},t}();function k(t){return t<0?-t<1e-8:t<1e-8}!function(t){t[t.Invalid=0]="Invalid",t[t.External=1]="External",t[t.Slack=2]="Slack",t[t.Error=3]="Error",t[t.Dummy=4]="Dummy"}(S||(S={}));var N=function(){function t(t,e){this._id=e,this._type=t}return t.prototype.id=function(){return this._id},t.prototype.type=function(){return this._type},t}(),z=new N(S.Invalid,-1),P=function(){function t(t){void 0===t&&(t=0),this._cellMap=y(),this._constant=t}return t.prototype.cells=function(){return this._cellMap},t.prototype.constant=function(){return this._constant},t.prototype.isConstant=function(){return this._cellMap.empty()},t.prototype.allDummies=function(){for(var t=this._cellMap,e=0,r=t.size();e<r;++e){if(t.itemAt(e).first.type()!==S.Dummy)return!1}return!0},t.prototype.copy=function(){var e=new t(this._constant);return e._cellMap=this._cellMap.copy(),e},t.prototype.add=function(t){return this._constant+=t},t.prototype.insertSymbol=function(t,e){void 0===e&&(e=1),k(this._cellMap.setDefault(t,(function(){return 0})).second+=e)&&this._cellMap.erase(t)},t.prototype.insertRow=function(t,e){void 0===e&&(e=1),this._constant+=t._constant*e;for(var r=t._cellMap,o=0,n=r.size();o<n;++o){var i=r.itemAt(o);this.insertSymbol(i.first,i.second*e)}},t.prototype.removeSymbol=function(t){this._cellMap.erase(t)},t.prototype.reverseSign=function(){this._constant=-this._constant;for(var t=this._cellMap,e=0,r=t.size();e<r;++e){var o=t.itemAt(e);o.second=-o.second}},t.prototype.solveFor=function(t){var e=this._cellMap,r=-1/e.erase(t).second;this._constant*=r;for(var o=0,n=e.size();o<n;++o)e.itemAt(o).second*=r},t.prototype.solveForEx=function(t,e){this.insertSymbol(t,-1),this.solveFor(e)},t.prototype.coefficientFor=function(t){var e=this._cellMap.find(t);return void 0!==e?e.second:0},t.prototype.substitute=function(t,e){var r=this._cellMap.erase(t);void 0!==r&&this.insertRow(e,r.second)},t}();const A=(t,e,r)=>{for(let o=0;o<e;o+=1)for(const e of t)e.base.solve(e,r)},D=(t,e)=>{const r=new j,o={},n=(t,e)=>"".concat(t.id,"_").concat(e),i=(t,e)=>{const r=n(t,e);if(!o[r]){const n=o[r]=new g;n.property=e,n.obj=t}};for(const e of t){const t=e.property;i(e.a,t),i(e.b,t)}let s=0;for(const i of t){const t=i.property;try{r.addConstraint(i.base.strict(i,e,o[n(i.a,t)],o[n(i.b,t)]))}catch(t){s+=1}}r.updateVariables();const a=Object.values(o);for(const t of a)t.obj[t.property]=t.value()},C={strict:(t,e,r,o)=>new E(r.minus(o),x.Ge,t.separation,M.required)},V={strict:(t,e,r,o)=>new E(r.minus(o),x.Ge,e.layerSpace,M.required)},F={solve:(t,e)=>{const{a:r,b:o,strength:n}=t,i=n*(r[t.property]-o[t.property]);r[t.property]-=i,o[t.property]+=i},strict:(t,e,r,o)=>new E(r.minus(o),x.Eq,0,M.create(1,0,0,t.strength))},R={solve:(t,e)=>{const{edgeA:r,edgeB:o,separationA:n,separationB:i,strength:s}=t,a=s*((r.sourceNode[t.property]-o.sourceNode[t.property]-n)/n),c=s*((r.targetNode[t.property]-o.targetNode[t.property]-i)/i);r.sourceNode[t.property]-=a,o.sourceNode[t.property]+=a,r.targetNode[t.property]-=c,o.targetNode[t.property]+=c}},q={strict:(t,e,r,o)=>new E(o.minus(r),x.Ge,t.separation,M.required)};const I="fid",X="sid",L="sn",G="pid",T="".concat(G,"=:pipelineId"),Y=(()=>{if("undefined"==typeof window||!window.location)return"/";const{pathname:t}=window.location,e=t.replace(/\/(workflow).*$/,"");return e.endsWith("/")?e:"".concat(e,"/")})(),B=("".concat(Y,"?").concat(T,"&").concat(I,"=:id"),"".concat(Y,"?").concat(T,"&").concat(X,"=:id"),"".concat(Y,"?").concat(T,"&").concat(L,"=:fullName"),"".concat(Y,"?").concat(T),"https://docs.kedro.org/projects/kedro-viz/en/stable/"),U=("".concat(B,"share_kedro_viz/"),"".concat(B,"preview_datasets/#disabling-previews"),"".concat(B,"publish_and_share_kedro_viz_on_aws/#set-up-endpoint"),"".concat(B,"publish_and_share_kedro_viz_on_azure/#set-up-endpoint"),"".concat(B,"publish_and_share_kedro_viz_on_gcp/#set-up-endpoint"),"workflow"),W=(t,e)=>t.map((t=>({base:C,property:e.coordSecondary,a:t.targetNode,b:t.sourceNode,separation:"vertical"===e.orientation?e.spaceY+e.extraVerticalGap:e.spaceY}))),J=(t,e,r)=>{const o=[];if(!e)return o;const n=e.map((e=>t.filter((t=>t.nearestLayer===e))));for(let t=0;t<n.length-1;t+=1){const e=n[t],i=n[t+1],s={id:"layer-".concat(t),x:0,y:0};for(const t of e)o.push({base:V,property:r.coordSecondary,a:s,b:t});for(const t of i)o.push({base:V,property:r.coordSecondary,a:t,b:s})}return o},$=(t,e)=>{const{spaceX:r,coordPrimary:o}=e,n=[];for(let e=0;e<t.length;e+=1){const i=t[e],{sourceNode:s,targetNode:a}=i,c=s.sources.length+s.targets.length+a.sources.length+a.targets.length;for(let p=e+1;p<t.length;p+=1){const e=t[p],{sourceNode:u,targetNode:f}=e;if(s.row>=f.row||a.row<=u.row)continue;const h=u.sources.length+u.targets.length+f.sources.length+f.targets.length;n.push({base:R,property:o,edgeA:i,edgeB:e,separationA:.5*s.width+r+.5*u.width,separationB:.5*a.width+r+.5*f.width,strength:1/Math.max(1,(c+h)/4)})}}return n},H=(t,e)=>t.map((t=>{let{sourceNode:r,targetNode:o}=t;return{base:F,property:e.coordPrimary,a:r,b:o,strength:.6/Math.max(1,r.targets.length+o.sources.length-2)}})),K=(t,e)=>{const{spaceX:r,coordPrimary:o,spreadX:n,orientation:i,extraVerticalGap:a}=e,c=[];for(let e=0;e<t.length;e+=1){const p=t[e];p.sort(((t,e)=>l(t[o],e[o],t.id,e.id)));for(let t=0;t<p.length-1;t+=1){const e=p[t],u=p[t+1],f=Math.max(1,e.targets.length+e.sources.length-2),h=Math.max(1,u.targets.length+u.sources.length-2),l=Math.min(10,f*h*n),d=s(l*r,r),y="horizontal"===i?e.height+u.height+a:.5*e.width+d+.5*u.width+a;c.push({base:q,property:o,a:e,b:u,separation:y})}}return c},Q=function(t,e,r,o,n){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1.25,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.25;const c=Z(t,n),p=Math.round(o*a);let u=0;for(let t=0;t<e.length-1;t+=1){const a=c[t]||0,f=s(a*i*o,p);if("horizontal"===n){u+=f+.5*Math.max(...e[t].map((t=>t.width)))+.5*Math.max(...e[t+1].map((t=>t.width)))}else u+=f;for(const o of e[t+1])o[r]+=u}},Z=(t,e)=>{const r={};for(const o of t){const t=Math.abs(a(o.targetNode,o.sourceNode,e)-i)/i,n=o.sourceNode.row,s=o.targetNode.row-1;r[n]=r[n]||[0,0],r[n][0]+=t,r[n][1]+=1,s!==n&&(r[s]=r[s]||[0,0],r[s][0]+=t,r[s][1]+=1)}for(const t in r)r[t]=r[t][0]/(r[t][1]||1);return Object.values(r)};function tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const nt={layout:{spaceX:14,spaceY:110,layerSpaceY:100,spreadX:2.2,padding:100,iterations:25},routing:{spaceX:26,spaceY:28,minPassageGap:40,stemUnit:8,stemMinSource:0,stemMinTarget:15,stemMax:10,stemSpaceSource:6,stemSpaceTarget:10}},it=function(t,e,r,o,n){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nt;st(t,e),at(t,r),(t=>{let{nodes:e,edges:r,layers:o,spaceX:n,spaceY:i,spreadX:s,layerSpaceY:a,iterations:c,orientation:p,view:u}=t;const f="workflow"===u?60:0;let l="x",d="y";"horizontal"===p&&(l="y",d="x");for(const t of e)t[l]=0,t[d]=0;const y={orientation:p,spaceX:n,spaceY:i,spreadX:s,layerSpace:.5*(i+a),coordPrimary:l,coordSecondary:d,extraVerticalGap:f},m=W(r,y),v=J(e,o,y);D([...m,...v],y);const g=h(e,p),_=$(r,y),b=H(r,y);for(let t=0;t<c;t+=1)A(_,1,y),A(b,50,y);const w=K(g,y);D([...w,...b],y),Q(r,g,d,i,p)})(ot({nodes:t,edges:e,layers:r,orientation:o,view:n},i.layout)),(t=>{let{nodes:e,edges:r,spaceX:o,spaceY:n,minPassageGap:i,stemUnit:s,stemMinSource:y,stemMinTarget:m,stemMax:v,stemSpaceSource:g,stemSpaceTarget:_,orientation:b}=t;const w=h(e,b);for(const t of e)t.targets.sort(((t,e)=>l(a(e.sourceNode,e.targetNode,b),a(t.sourceNode,t.targetNode,b))));for(const t of r){const e=t.sourceNode,r=t.targetNode;t.points=[];const s=Math.min((e.width-g)/e.targets.length,g)*(e.targets.indexOf(t)-.5*(e.targets.length-1));let a={x:e.x,y:e.y};for(let f=e.row+1;f<r.row;f+=1){const e=w[f][0];let r={x:c(e)-o,y:e.y},h=1/0;const l=[et(et({},e),{},{x:Number.MIN_SAFE_INTEGER}),...w[f],et(et({},e),{},{x:Number.MAX_SAFE_INTEGER})];for(let t=0;t<l.length-1;t+=1){const e=l[t],s=l[t+1],f=c(s)-p(e);if(f<i)continue;const y=Math.min(o,.5*f);let m,v,g,_;"vertical"===b&&(m=p(e)+y,v=u(e)-n,g=c(s)-y,_=u(s)-n);const w=d(a.x,a.y,m,v,g,_),S=(x=a.x,M=w.x,Math.abs(x-M));if(S>h)break;S<h&&(h=S,r=w)}const y=e.height+n;t.points.push({x:r.x+s,y:r.y}),t.points.push({x:r.x+s,y:r.y+y}),a={x:r.x,y:r.y+y}}}var x,M;for(const t of e)t.targets.sort(((t,e)=>l(a(e.sourceNode,e.points[0]||e.targetNode,b),a(t.sourceNode,t.points[0]||t.targetNode,b)))),t.sources.sort(((t,e)=>l(a(t.points[t.points.length-1]||t.sourceNode,t.targetNode,b),a(e.points[e.points.length-1]||e.sourceNode,e.targetNode,b))));for(const t of r){const e=t.sourceNode,r=t.targetNode,o=e.targets.indexOf(t)-.5*(e.targets.length-1),n=r.sources.indexOf(t)-.5*(r.sources.length-1),i=s*e.targets.length*(1-Math.abs(o)/e.targets.length),a=s*r.sources.length*(1-Math.abs(n)/r.sources.length);let h,l;"vertical"===b?(h=[{x:e.x,y:f(e)},{x:e.x,y:f(e)+y},{x:e.x,y:f(e)+y+Math.min(i,v)}],l=[{x:r.x,y:u(r)-m-Math.min(a,v)},{x:r.x,y:u(r)-m},{x:r.x,y:u(r)}]):(h=[{x:p(e),y:e.y},{y:e.y,x:p(e)+y},{y:e.y,x:p(e)+y+Math.min(i,v)}],l=[{y:r.y,x:c(r)-m-Math.min(a,v)},{y:r.y,x:c(r)-m},{y:r.y,x:c(r)}]);const d=[...h,...t.points,...l],g="vertical"===b?"y":"x";let _=d[0][g];for(const t of d)t[g]<_?t[g]=_:_=t[g];t.points=d}})(ot({nodes:t,edges:e,layers:r,orientation:o},i.routing));const s=ft(t,i.layout.padding);return t.forEach((t=>((t,e)=>(t.x=t.x-e.x,t.y=t.y-e.y,t.order=t.x+9999*t.y,t))(t,s.min))),e.forEach((t=>((t,e)=>(t.points.forEach((t=>{t.x=t.x-e.x,t.y=t.y-e.y})),t))(t,s.min))),{nodes:t,edges:e,layers:r,size:s}},st=(t,e)=>{const r={};for(const e of t)r[e.id]=e,e.targets=[],e.sources=[];for(const t of e)t.sourceNode=r[t.source],t.targetNode=r[t.target],t.sourceNode.targets.push(t),t.targetNode.sources.push(t)},at=(t,e)=>{if(e&&e.length>0){const r={};for(const t of e)r[t]=!0;const o=t=>Boolean(t&&t.layer in r),n=e[e.length-1];for(const e of t){const t=ut(e,ct,pt,o);e.nearestLayer=t?t.layer:n}}},ct=t=>t.targets.map((t=>t.targetNode)),pt=(t,e)=>t.rank-e.rank,ut=(t,e,r,o,n)=>{if(o(t))return t;(n=n||{})[t.id]=!0;return e(t).filter((t=>!n[t.id])).sort(r).map((t=>ut(t,e,r,o,n))).filter(o).sort(r)[0]},ft=(t,e)=>{const r={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}};for(const e of t){const t=e.x,o=e.y;t<r.min.x&&(r.min.x=t),t>r.max.x&&(r.max.x=t),o<r.min.y&&(r.min.y=o),o>r.max.y&&(r.max.y=o)}return r.width=r.max.x-r.min.x+2*e,r.height=r.max.y-r.min.y+2*e,r.min.x-=e,r.min.y-=e,r};function ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const dt=t=>{let{nodes:e,edges:r,layers:o,orientation:n,view:i}=t;for(const t of e){t.iconSize=t.iconSize||24,t.icon=t.icon||"node";const e={x:20,y:10},r=7*(t&&t.fullName&&t.fullName.length||t&&t.name&&t.name.length),o=6,n=t.iconSize+r+o;let s=t.width||n+2*e.x;t.width=i===U?Math.max(s,180):s,t.height=t.height||t.iconSize+2*e.y,t.textOffset=t.textOffset||(n-r)/2,t.iconOffset=t.iconOffset||-n/2}const s=it(e,r,o,n,i);return lt(lt({},s),{},{size:lt(lt({},s.size),{},{marginx:100,marginy:100})})};addEventListener("message",(function(t){var r,o=t.data,n=o.type,i=o.method,s=o.id,a=o.params;"RPC"===n&&i&&((r=e[i])?Promise.resolve().then((function(){return r.apply(e,a)})):Promise.reject("No such method")).then((function(t){postMessage({type:"RPC",id:s,result:t})})).catch((function(t){var e={message:t};t.stack&&(e.message=t.message,e.stack=t.stack,e.name=t.name),postMessage({type:"RPC",id:s,error:e})}))})),postMessage({type:"RPC",method:"ready"});